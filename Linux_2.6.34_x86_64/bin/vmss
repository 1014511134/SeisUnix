#! /bin/sh 
# hroff, hroffs, hpic, hpics, me, mes, ms, mss, mm, mms - troff command set
# Usage: hroff [troff options] -L[lp options] -H[hplj options] filenames
#
# Caveat: Pic doesn't seem to work with macro packages
#
# $Author: john $
# $Source: /usr/local/textproc/troff/RCS/me.sh,v $
# $Revision: 1.1 $ ; $Date: 1997/05/05 21:00:59 $

PATH=/bin:/usr/bin:/usr/bin/X11
cmd=`basename $0`

SHOW="showpage"

TMPFILE=/tmp/$$.tmp
options=
files="/usr/share/groff"
for i
do
	case $i in
	-)	echo "Usage: $cmd [troff options] file(s)" 1>&2; exit 1
	;;
	-*)	# Collect troff options
		options=" $options $i"
	;;
	*)	# Collect files.
		if
			[ -f $i ]
		then
			files="$files $i"
			name="$i"
			manfiles="$i"
		else
			echo "$i doesn't exist" 1>&2; exit 1
		fi
	;;
	esac
done

case $cmd in
hroff)	# Roman font; user-specified troff macro
	tbl $files | eqn | troff $options $2> /dev/null
;;
hroffs)	# Sans serif font; user-specified troff macro
	echo "Not ready"
;;
hpic)	# Pic roman font
	echo "Not ready"
;;
hpics)	# Pic sans serif font
	echo "Not ready"
;;
me|mer)	# Augmented me, roman font
	tbl $files | eqn | groff -me  $options | lpr  2> /dev/null
;;
vme|vmer)	# view Augmented me, roman font
	tbl $files | eqn | groff -me $options > $TMPFILE
	ghostview  $TMPFILE  2> /dev/null
	trap 'rm $TMPFILE 1>/dev/null 2>/dev/null' 0 1 2 15
;;
pme|pmer)	# view Augmented me, roman font
	tbl $files | eqn | groff -me  $options | lpr  2> /dev/null
;;
mes)	# Augmented me, sans serif font
	tbl $files | eqn | troff -mes -F Helvetica -w $options 2> /dev/null
;;
vmes)	# view Augmented me, roman font
	tbl $files | eqn | groff -mes $options > $TMPFILE
	ghostview  $TMPFILE  2> /dev/null
	trap 'rm $TMPFILE 1>/dev/null 2>/dev/null' 0 1 2 15
;;
pmes)	# Augmented me, sans serif font
	tbl $files | eqn | troff -mes -F Helvetica -w -t $options \
	> $name.ps  2> /dev/null
;;
ms)	# ms, roman font
	tbl $files | eqn | troff -ms $options 2> /dev/null

;;
mss)	# ms, san serif font
	tbl $files | eqn | troff -ms -F Helvetica $options 2> /dev/null
;;
vms)	# view ms file, roman font
	tbl $files | eqn | groff -ms $options  | ghostview
;;
vmss)	# view ms file, san serif font
	tbl $files | eqn | troff -ms -w -t -F Helvetica $options | ghostview 
;;
pms)	# view ms file, roman font
	tbl $files | eqn | troff -ms -w -t $options > $name.ps 2> /dev/null
;;
mman)	# print man page
	troff < $manfiles -man $options 2> /dev/null
;;
vman)	# view man page
	troff < $manfiles -man -w -t $options  | ghostview
;;
pman)	# view man page
	troff < $manfiles -man -w -t $options  > $name.ps  2> /dev/null
;;
esac
exit 0
